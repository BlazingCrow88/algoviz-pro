{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="viz-container">
    <h1>Algorithm Visualization</h1>

    <!-- Error Display Area -->
    <div id="error-area" style="display: none; background: #fee; border: 2px solid #c00; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
        <strong style="color: #c00;">Error:</strong>
        <span id="error-message"></span>
    </div>

    <div class="controls-section">
        <div class="input-group">
            <label for="algorithm-select">Select Algorithm:</label>
            <select id="algorithm-select">
                <option value="bubble">Bubble Sort</option>
                <option value="merge">Merge Sort</option>
                <option value="quick">Quick Sort</option>
                <option value="binary">Binary Search</option>
                <option value="linear">Linear Search</option>
            </select>
        </div>

        <div class="input-group">
            <label for="array-input">Input Array (comma-separated):</label>
            <input type="text" id="array-input" value="5,2,8,1,9,3,7,4,6" />
        </div>

        <!-- Target input for searching algorithms -->
        <div class="input-group" id="target-group" style="display: none;">
            <label for="target-input">Target Value:</label>
            <input type="text" id="target-input" value="7" />
        </div>

        <div class="button-group">
            <button id="execute-btn" class="viz-btn viz-btn-primary">Execute</button>
            <button id="play-btn" class="viz-btn viz-btn-success" disabled>Play</button>
            <button id="pause-btn" class="viz-btn viz-btn-warning" disabled>Pause</button>
            <button id="step-btn" class="viz-btn viz-btn-info" disabled>Step</button>
            <button id="reset-btn" class="viz-btn viz-btn-danger" disabled>Reset</button>
        </div>

        <div class="input-group">
            <label for="speed-slider">Animation Speed:</label>
            <input type="range" id="speed-slider" min="1" max="10" value="5" />
            <span id="speed-value">Medium</span>
        </div>
    </div>

    <div class="canvas-container">
        <canvas id="visualization-canvas" width="1000" height="400"></canvas>
    </div>

    <div class="statistics">
        <h3>Statistics</h3>
        <p>Comparisons: <span id="comparisons-count">0</span></p>
        <p>Swaps: <span id="swaps-count">0</span></p>
        <p>Array Size: <span id="array-size">0</span></p>
        <p>Current Step: <span id="current-step">0 / 0</span></p>
        <p>Time Elapsed: <span id="time-elapsed">0</span> ms</p>
        <p>Status: <span id="status-message">Ready</span></p>
        <p>Step Message: <span id="step-message">-</span></p>
    </div>
</div>

<style>
    .viz-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .viz-container h1 {
        color: #333;
        margin-bottom: 30px;
        text-align: center;
    }

    .controls-section {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
    }

    .input-group {
        margin-bottom: 15px;
    }

    .input-group label {
        display: block;
        margin-bottom: 5px;
        color: #555;
        font-weight: bold;
    }

    .input-group select,
    .input-group input[type="text"] {
        width: 100%;
        max-width: 400px;
        padding: 10px;
        border: 2px solid #ddd;
        border-radius: 5px;
        font-size: 1em;
    }

    .input-group input[type="range"] {
        width: 300px;
        vertical-align: middle;
    }

    #speed-value {
        margin-left: 10px;
        color: #666;
        font-weight: bold;
    }

    .button-group {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin: 20px 0;
    }

    .viz-btn {
        padding: 12px 24px;
        border: none;
        border-radius: 5px;
        font-size: 1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        color: white;
    }

    .viz-btn:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    .viz-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .viz-btn-primary { background: #007bff; }
    .viz-btn-success { background: #28a745; }
    .viz-btn-warning { background: #ffc107; color: #333; }
    .viz-btn-info { background: #17a2b8; }
    .viz-btn-danger { background: #dc3545; }

    .canvas-container {
        background: white;
        border: 2px solid #ddd;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        display: flex;
        justify-content: center;
    }

    #visualization-canvas {
        max-width: 100%;
        height: auto;
        border: 1px solid #eee;
    }

    .statistics {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #007bff;
    }

    .statistics h3 {
        margin-top: 0;
        color: #007bff;
    }

    .statistics p {
        margin: 8px 0;
        color: #555;
    }

    .statistics span {
        font-weight: bold;
        color: #333;
    }
</style>

<!-- Load external JavaScript file -->
<script src="{% static 'js/visualizer.js' %}"></script>
{% endblock %}