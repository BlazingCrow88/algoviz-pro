{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="analytics-container">
    <h1>Code Analytics</h1>
    <p>Analyze Python code complexity using AST (Abstract Syntax Tree)</p>

    <div class="analytics-feature-box">
        <h3>ğŸ“Š Features</h3>
        <ul>
            <li>Cyclomatic Complexity Analysis</li>
            <li>Function Length Metrics</li>
            <li>Code Quality Scores</li>
            <li>GitHub Integration</li>
        </ul>
    </div>

    <div class="analytics-action-buttons">
        <a href="{% url 'analytics:analyze' %}" class="btn btn-primary">âœ¨ Analyze Code Now</a>
        <a href="{% url 'github_integration:search' %}" class="btn btn-secondary">Search GitHub â†’</a>
    </div>

    {% if recent_analyses %}
    <div class="analytics-recent-analyses">
        <h3>Recent Analyses</h3>
        <div class="analytics-analyses-list">
            {% for analysis in recent_analyses %}
            <div class="analytics-analysis-card">
                <div class="analytics-analysis-header">
                    <span class="analytics-complexity-badge {{ analysis.get_complexity_rating.lower }}">
                        Complexity: {{ analysis.cyclomatic_complexity }}
                    </span>
                    <span class="analytics-date">{{ analysis.created_at|date:"M d, Y H:i" }}</span>
                </div>
                <div class="analytics-analysis-stats">
                    <span>ğŸ“Š {{ analysis.num_functions }} function(s)</span>
                    <span>ğŸ“ {{ analysis.code_lines }} lines</span>
                    <span>ğŸ” Maintainability: {{ analysis.maintainability_index|floatformat:0 }}</span>
                </div>
                <a href="{% url 'analytics:results' analysis.id %}" class="analytics-view-link">View Details â†’</a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>

<link rel="stylesheet" href="{% static 'css/analytics.css' %}">
{% endblock %}